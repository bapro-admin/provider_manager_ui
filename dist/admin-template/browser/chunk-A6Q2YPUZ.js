import{d as F,k,m as x,n as G,p as N,q as j,r as D,u as T,v as E,w as L,x as R,y as M,z as B}from"./chunk-DUQJUZEH.js";import{J,K}from"./chunk-67QNU7YQ.js";import{O,S as _,T as h,V as A,W as H,_ as U,a as I,aa as V,ba as P,c as y,fa as q,ha as z}from"./chunk-BTRDCSZN.js";import{Da as l,Ea as u,Gb as f,Pb as n,Qb as i,Rb as m,Yb as b,ga as g,jc as c,kb as d,la as S,lb as s,qa as C,rc as w}from"./chunk-VWWPF74O.js";var p=class{constructor(e){this.id_user=e.id_user||0,this.username=e.username||"",this.password=e.password||"",this.role=e.role||"",this.created_at=e.created_at,this.updated_at=e.updated_at}};var Y=J.API_URL,Z={headers:new I({"Content-Type":"application/json"})},Q=(()=>{let e=class e{constructor(t){this.http=t}login(t,o){return this.http.post(Y+"/auth/login",{username:t,password:o},Z)}};e.\u0275fac=function(o){return new(o||e)(S(y))},e.\u0275prov=g({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var he=(()=>{let e=class e{constructor(t,o,a,v,W){this.router=t,this.fb=o,this.authService=a,this.snackBar=v,this.sessionService=W,this.userdata=new p({}),this.loginForm=this.fb.group({username:["",[h.required]],password:["",[h.required]]})}onSubmit(){this.loginForm.valid&&this.authService.login(this.loginForm.value.username,this.loginForm.value.password).subscribe(t=>{delete t.user.password,this.userdata=t.user,this.storeSession(t),this.userdata.role==="ADMIN"?this.router.navigate(["/usuarios"]):this.router.navigate(["/proveedores"])},t=>{console.log("ERROR ON LOGIN PROCESS",t),this.openSnackbar("Ocurrio un error al iniciar sesion","Ok")})}openSnackbar(t,o){this.snackBar.open(t,o,{duration:3e3})}storeSession(t){this.sessionService.saveToken(t.token),this.sessionService.saveUser(t.user)}};e.\u0275fac=function(o){return new(o||e)(s(F),s(q),s(Q),s(K),s(O))},e.\u0275cmp=C({type:e,selectors:[["app-login"]],standalone:!0,features:[w],decls:24,vars:2,consts:[[1,"bg-light","dark:bg-transparent","min-vh-100","d-flex","flex-row","align-items-center"],["breakpoint","md"],[1,"justify-content-center"],["lg","4","xl","6"],[1,"p-4"],[3,"ngSubmit","formGroup"],[1,"text-body-secondary"],[1,"mb-3"],["cInputGroupText",""],["cIcon","","name","cilUser"],["formControlName","username","autoComplete","username","cFormControl","","placeholder","Username",1,"form-control"],[1,"mb-4"],["cIcon","","name","cilLockLocked"],["formControlName","password","autoComplete","current-password","cFormControl","","placeholder","Password","type","password",1,"form-control"],["xs","6"],["cButton","","color","primary","type","submit",1,"px-4",3,"disabled"]],template:function(o,a){o&1&&(n(0,"div",0)(1,"c-container",1)(2,"c-row",2)(3,"c-col",3)(4,"c-card-group")(5,"c-card",4)(6,"c-card-body")(7,"form",5),b("ngSubmit",function(){return a.onSubmit()}),n(8,"h1"),c(9,"Login"),i(),n(10,"p",6),c(11,"Accede a tu cuenta"),i(),n(12,"c-input-group",7)(13,"span",8),l(),m(14,"svg",9),i(),u(),m(15,"input",10),i(),n(16,"c-input-group",11)(17,"span",8),l(),m(18,"svg",12),i(),u(),m(19,"input",13),i(),n(20,"c-row")(21,"c-col",14)(22,"button",15),c(23," Login "),i()()()()()()()()()()()),o&2&&(d(7),f("formGroup",a.loginForm),d(15),f("disabled",a.loginForm.invalid))},dependencies:[R,B,M,D,N,j,T,L,x,E,G,z,U,_,A,H,V,P,k]});let r=e;return r})();export{he as LoginComponent};
